import{r as y,q as v,W as j,j as e,Y as w}from"./app-14uhZjnU.js";import{a as r,S as C}from"./Sweetalert-BGV0ZP8N.js";import{B as N,P as k,N as S,C as B,A as q,a as A,b as D,c as H,d as U}from"./PersonInvolveData-DUhZt1Cc.js";import{B as $}from"./Breadcrumb-BsKga-3b.js";import{A as E}from"./AuthenticatedLayout-C5FwnfxA.js";import"./Modal-DdcaK8_G.js";import"./incidentTypes-Ciie-LQN.js";import"./barangays-rxzxdbNU.js";import"./regions-CZh2rcfQ.js";function G({auth:p,latestID:s}){const[t,l]=y.useState("Complainant"),o=v().props.auth.user,n=new Date,d=n.getFullYear(),c=n.getMonth()+1<10?`0${n.getMonth()+1}`:n.getMonth()+1,m=n.getDate()<10?`0${n.getDate()}`:n.getDate(),_=n.getHours()<10?`0${n.getHours()}`:n.getHours(),u=n.getMinutes()<10?`0${n.getMinutes()}`:n.getMinutes(),{data:a,setData:i,post:g,processing:b,errors:M,reset:F}=j({user_id:o==null?void 0:o.id,entry_number:s??0,barangay:o==null?void 0:o.name,date_reported:`${d}-${c}-${m}`,time_of_report:`${_}:${u}`,incident_type:"",complainant_data:[{complainant_family_name:"",complainant_first_name:"",complainant_middle_name:"",complainant_birth_date:"",complainant_place_of_birth:"",complainant_citizenship:1,complainant_gender:1,complainant_civil_status:1,complainant_occupation:1,complainant_education:1,complainant_email_address:"",complainant_street:"",complainant_village:"",complainant_barangay:0,complainant_city:0,complainant_province:0,complainant_region:0,complainant_work_street:"",complainant_work_village:"",complainant_work_barangay:0,complainant_work_city:0,complainant_work_province:0,complainant_work_region:0}],respondent_data:[{respondent_family_name:"",respondent_first_name:"",respondent_middle_name:"",respondent_birth_date:"",respondent_place_of_birth:"",respondent_citizenship:1,respondent_gender:1,respondent_civil_status:1,respondent_occupation:1,respondent_education:1,respondent_email_address:"",respondent_street:"",respondent_village:"",respondent_barangay:0,respondent_city:0,respondent_province:0,respondent_region:0,respondent_work_street:"",respondent_work_village:"",respondent_work_barangay:0,respondent_work_city:0,respondent_work_province:0,respondent_work_region:0}],narrative:"(Detail the narrative of the incident or event, answering the WHO, WHAT, WHERE, WHY and HOW of reporting either in English or common dialect)",remarks:"",complainant_signature:"",recorded_by:"",recorded_by_signature:""}),h=()=>a.entry_number==0||a.entry_number==s-1?r("Entry number  is required!","Unable to proceed, please answer entry number.","error",2500):a.barangay==""?r("Barangay name is required!","Unable to proceed, please provide barangay name.","error",2500):a.incident_type==""?r("Incident type is required!","Unable to proceed, please provide incident type.","error",2500):[a.complainant_data[0].complainant_family_name,a.complainant_data[0].complainant_first_name,a.complainant_data[0].complainant_middle_name].indexOf("")!=-1?r("Complainant name is required!","Unable to proceed, please provide Complainant name.","error",2500):a.complainant_data[0].complainant_birth_date==""?r("Complainant birth date is required!","Unable to proceed, please provide birth date.","error",2500):a.complainant_data[0].complainant_place_of_birth==""?r("complainant place of birth is required!","Unable to proceed, please provide place of birth .","error",2500):[a.complainant_data[0].complainant_region,a.complainant_data[0].complainant_province,a.complainant_data[0].complainant_city,a.complainant_data[0].complainant_barangay].indexOf(0)!=-1?r("Complainant address is required!","Unable to proceed, please provide Complainant address.","error",2500):a.narrative==""?r("Narrative report is required!","Unable to proceed, please provide narrative report .","error",2500):t!="Complainant"?l("Complainant"):l("Suspect/s"),f=x=>{x.preventDefault(),g(route("blotter")),setTimeout(()=>{C.fire({title:"Blotter Added",text:"Entry saved to your database!",icon:"success",timer:2500})},2e3)};return console.log("data : ",a),e.jsxs(E,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Blotter"}),children:[e.jsx(w,{title:"Barangay Blotter"}),e.jsx($,{pageName:t}),e.jsx("div",{className:"grid grid-cols-1 gap-9 sm:grid-cols-1",children:e.jsxs("div",{className:"flex flex-col lg:gap-0 gap-4",children:[t==="Complainant"?e.jsx(N,{data:a,setData:i}):null,e.jsx(k,{data:a,setData:i,person:t}),t==="Complainant"?e.jsx(S,{data:a,setData:i}):null,t==="Suspect/s"?e.jsx(B,{data:a,setData:i}):null,t==="Suspect/s"?e.jsx(q,{data:a,setData:i}):null,e.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[e.jsx("button",{className:"bg-blue-500  hover:bg-blue-700 text-white px-3 py-1 rounded-3xl flex gap-1",onClick:h,children:t==="Complainant"?e.jsxs(e.Fragment,{children:["Next to Person Complain of/Suspects",e.jsx(A,{className:"my-1 hover:font-bold"})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"my-1 hover:font-bold"}),"Back"]})}),t==="Suspect/s"?e.jsx("form",{onSubmit:f,children:e.jsx("button",{className:"bg-blue-500  hover:bg-blue-700 text-white px-5 py-1 rounded-3xl flex gap-1",onClick:()=>{},children:b?e.jsxs(e.Fragment,{children:[" Submitting... ",e.jsx(U,{className:"m-1 hover:font-bold animate-spin"})]}):e.jsxs(e.Fragment,{children:[" Submit ",e.jsx(H,{className:"m-1 hover:font-bold"})]})})}):null]})]})})]})}export{G as default};
